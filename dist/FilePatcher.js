Object.defineProperty(exports,"__esModule",{value:true});exports.default=undefined;var _stringify=require('babel-runtime/core-js/json/stringify');var _stringify2=_interopRequireDefault(_stringify);var _defineProperty2=require('babel-runtime/helpers/defineProperty');var _defineProperty3=_interopRequireDefault(_defineProperty2);var _classCallCheck2=require('babel-runtime/helpers/classCallCheck');var _classCallCheck3=_interopRequireDefault(_classCallCheck2);var _createClass2=require('babel-runtime/helpers/createClass');var _createClass3=_interopRequireDefault(_createClass2);var _patterns=require('./patterns');var _patterns2=_interopRequireDefault(_patterns);var _ramda=require('ramda');var _ramda2=_interopRequireDefault(_ramda);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var FilePatcher=function(){function FilePatcher(context){(0,_classCallCheck3.default)(this,FilePatcher);var parameters=context.parameters,strings=context.strings,print=context.print,ignite=context.ignite,filesystem=context.filesystem;this.ignite=ignite;this.filesystem=filesystem;}(0,_createClass3.default)(FilePatcher,[{key:'pacthAppNavigationFile',value:function pacthAppNavigationFile(tabName){var appNavFilePath=process.cwd()+'/App/Navigation/AppNavigation.js';var importToAdd='import '+tabName+' from \'Screens/'+tabName+'/'+tabName+'\'';var routeToAdd='  '+tabName+': { screen: '+tabName+' },';if(!this.filesystem.exists(appNavFilePath)){var msg='No \''+appNavFilePath+'\' file found.  Can\'t insert screen.';print.error(msg);process.exit(1);}this.ignite.patchInFile(appNavFilePath,{after:_patterns2.default.appNavImports,insert:importToAdd});this.ignite.patchInFile(appNavFilePath,{after:_patterns2.default.appNavRoutes,insert:routeToAdd});}},{key:'patchReducers',value:function patchReducers(hoc){var reduxIndexFile=process.cwd()+'/App/Redux/index.js';var importToAdd='import * as '+hoc.Name+'Reducer from \''+hoc.reduxRootDir+'/rdx.'+hoc.Name+'\'';this.ignite.patchInFile(reduxIndexFile,{after:_patterns2.default.reducersImports,insert:importToAdd});this.ignite.patchInFile(reduxIndexFile,{after:_patterns2.default.reducers,insert:'\t\t'+hoc.name+': '+hoc.Name+'Reducer.reducer,'});}},{key:'patchReducersWithForm',value:function patchReducersWithForm(formAction){var reduxIndexFile=process.cwd()+'/App/Redux/index.js';var args=formAction.args,name=formAction.name;var propsObj=_ramda2.default.mergeAll(args.map(function(arg){return(0,_defineProperty3.default)({},arg,'');}));var reducer=('\t\t\t'+name+'Form: '+(0,_stringify2.default)(propsObj,null,'\t\t\t\t')).replace(/.$/,'\t\t\t}')+',';this.ignite.patchInFile(reduxIndexFile,{after:_patterns2.default.formsReducers,insert:reducer});}},{key:'patchSagasIndex',value:function patchSagasIndex(hoc){var sagasIndexFile=process.cwd()+'/App/Sagas/index.js';var args=hoc.args,name=hoc.name,Name=hoc.Name;var sagaImport='import '+hoc.Name+'Sagas from \''+hoc.sagaRootDir+'/sga.'+hoc.Name+'\'';var sagasSpread='\t\t...'+hoc.Name+'Sagas,';this.ignite.patchInFile(sagasIndexFile,{after:_patterns2.default.sagasImports,insert:sagaImport});this.ignite.patchInFile(sagasIndexFile,{after:_patterns2.default.sagasEffects,insert:sagasSpread});}},{key:'patchNavReducer',value:function patchNavReducer(hoc){var sagasIndexFile=process.cwd()+'/App/Redux/rdx.navigation.js';var args=hoc.args,name=hoc.name,Name=hoc.Name;var stackImport='import '+hoc.Name+'Container from \''+hoc.screenRootDir+'/'+hoc.Name+'\'';var navReducer='\t'+name+'Nav: (state, action) => {\n    return '+Name+'Container.router.getStateForAction(action, state)\n  },';this.ignite.patchInFile(sagasIndexFile,{after:_patterns2.default.navReducerImport,insert:stackImport});this.ignite.patchInFile(sagasIndexFile,{after:_patterns2.default.navReducer,insert:navReducer});}}]);return FilePatcher;}();exports.default=FilePatcher;